/*
 * Textarea Line Count
 * Version 1.3
 *
 * http://www.mostthingsweb.com/
 *
 * This is the abridged version of the license.
 * Licensed under MIT License: http://en.wikipedia.org/wiki/MIT_License
 *
 * Copyright (c) 2012 Chris Laplante (MostThingsWeb)
 *
 */

(function(c){c.countLines=function(){var a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890",b;switch(options.charsMode){case "random":options.chars="";a+=".,?!-+;:'\"";for(b=1;12>=b;b++)options.chars+=a[Math.floor(Math.random()*a.length)];break;case "alpha":options.chars=a;break;case "alpha_extended":options.chars=a+".,?!-+;:'\"";break;case "from_ta":if(15>value.length)options.chars=a;else for(b=1;15>=b;b++)options.chars+=value[Math.floor(Math.random()*value.length)]}if(!c.isArray(options.chars))options.chars=
options.chars.split("");a="";for(b=1;10>=b;b++)a+=Math.floor(10*Math.random())+1;ta.after("<span id='s"+a+"'></span>");var d=c("#s"+a);d.hide();c.each(options.fontAttrs,function(a,b){d.css(b,ta.css(b))});a=value.split("\n");b=a.length;var h;if(options.recalculateCharWidth||null==ta.data("average_char")){var i=options.chars,l=i.length,f=0;c.each(i,function(a,b){d.text(b);f+=d.width()});ta.data("average_char",Math.ceil(f/l))}h=ta.data("average_char");d.remove();var m=2*(ta.outerWidth()-ta.width()),
g,j=0,e=0,k=0;c.each(a,function(a,b){g=(b.length+1)*h+m;if(g>=ta.outerWidth()){var d=Math.floor(g/ta.outerWidth());e+=d;j++}""==c.trim(b)&&k++});a={};a.actual=b;a.wrapped=j;a.wraps=e;a.visual=b+e;a.blank=k;return a}})(jQuery);